Steps to upgrade to a new version:
- In the current environment, start a root shell by running: `./scripts/start_management.sh`
- Make a backup by running: `./backup.sh`
- Exit the root shell
- Backup the changes to the environment file with: `diff -u ./templates/env.j2 .env > ./backup/env.patch`
- Store both files in the ./backup directory in a safe place. The backup directory will be wiped!!!
- Remove the current service by running `./scripts/clean.sh`
- Rename the repository and do a `git clone` again to get a fresh copy.
- Enter the repository and checkout the version you need, e.g.: `git checkout v3.0.22`
- Run `./scripts/init.sh` to create some directories and create the .env file.
- Copy the `env.patch` into the repository and place the backup file in `./backup`
- Customize the .env file by running: `patch -b .env < env.patch`
- Check the `.env` and the `.env.rej` file (if it exists) to see if configuration has succeeded.
- Do a `docker-compose build` followed by a `docker-compose up -d`
- The FreeRADIUS server should be operational again.
- Remove the backup and the env.patch file
- Do a `docker image prune -a` to remove unused images (Read the warning!)
